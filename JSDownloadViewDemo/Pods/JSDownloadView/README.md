[![header](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/download_icon.png)](http://qiaotongxin.cc)
# JSDownloadView
[![GitHub license](https://img.shields.io/badge/platform-ios-green.svg
)](https://github.com/josin22/JSDownloadView)
[![GitHub license](https://img.shields.io/badge/license-MIT-green.svg)](https://raw.githubusercontent.com/josin22/JSDownloadView/master/LICENSE)
[![CocoaPods Compatible](https://img.shields.io/badge/pod-v1.0-orange.svg)](https://github.com/josin22/JSDownloadView)
[![CocoaPods Compatible](https://img.shields.io/badge/build-passing-green.svg)](https://github.com/josin22/JSDownloadView)


# è®¾è®¡çµæ„Ÿ
è®¾è®¡æ­¤æ•ˆæœçš„ä½œè€… [Nick](https://material.uplabs.com/nickbuturisvili);
![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/download.gif)


# å¼€å§‹ä¹‹å‰ä½ éœ€è¦äº†è§£çš„
å…ˆä¸Šä¸€å¼ CAAnimationå±‚æ¬¡å›¾:
![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/caanimation.png)

å›¾ä¸Šåªæ˜¯ä¸€äº›ç±»çš„å¸¸ç”¨å±æ€§,åè¾¹æ›´å¤šä»£ç ä¼šè®²åˆ°.

# æ€æ ·åˆ†è§£åŠ¨ç”»

å…³äºåˆ†è§£gif,å…¶å®ç”¨mac é¢„è§ˆ å¼€å‘gifæ–‡ä»¶,å°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰å¸§çš„å›¾ç‰‡.
![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/fenjie_download.png)

é€‰å–å…¶ä¸­å‡ å¼ åŠ¨ç”»èŠ‚ç‚¹çš„å›¾ç‰‡å­˜å¥½å¤‡ç”¨.æ¯”å¦‚:
![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/download1.png)
![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/download2.png)
![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/download3.png)
![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/download4.png)
![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/download5.png)

è€ƒè™‘åˆ°é€‚é…é—®é¢˜serviceç±»é‡Œå·²ç»æå–å¥½äº†.

# æ€æ ·è¿è´¯åŠ¨ç”»

è¿è´¯åŠ¨ç”»æ˜¯å±•ç¤ºä½ åšçš„æ•ˆæœæµç•…ä¸æµç•…,çœ‹ç€èˆ’æœä¸èˆ’æœçš„èƒ½åŠ›.å…¶å®æˆ‘æ˜¯ä¹Ÿæ˜¯å°è¯•å¾ˆå¤šé,è®©å¾ˆå¤šäººçœ‹äº†è¿™ä¸ªæ•ˆæœ,æœ‰è¯´åˆ«æ‰­çš„å’±å°±æ”¹,å’‹é¡ºå’‹æ¥.æ‰€ä»¥è®©åŠ¨ç”»è¿è´¯èµ·æ¥å°¤ä¸ºé‡è¦.

ç¬¬ä¸€,å°±æ˜¯è¦åŠ¨ç”»èŠ‚ç‚¹è¦é€‰å‡†ç¡®,å®šä½å¥½åŠ¨ç”»ä¸åŠ¨ç”»çš„è¡”æ¥å¤„.
ç¬¬äºŒ,è®©åŠ¨ç”»ç»“æŸæ—¶,æ¢å¤è‡ªç„¶çŠ¶æ€,è€Œä¸æ˜¯é»˜è®¤çŠ¶æ€.å°½é‡ä¸è¦æœ‰å¤ªå¤§çš„å·®å¼‚å’Œä¸è§„æ•´çš„åœ°æ–¹
ç¬¬ä¸‰,ä½¿ç”¨ç»„åˆåŠ¨ç”»,æå¥½æ—¶é—´èŠ‚ç‚¹.

ç®€å•çš„å°±è¯´å°±è¯´è¿™ä¹ˆå¤š,ä¸‹é¢æˆ‘ä»¬å¼€å§‹æ¼”ç»ƒä»£ç ~~~~~~

# ä»£ç å®ç° 

## åŸºæœ¬å®ç°æƒ³æ³•
1.è‡ªå®šä¹‰UIControlç±»,å› ä¸ºå®ƒæœ¬èº«å°±æ˜¯UIViewå­ç±»,åšç‚¹å‡»äº‹ä»¶çš„Viewå†å¥½ä¸è¿‡.(å¦ä¸€ç§æ–¹å¼ç”¨blockç‚¹å‡»å›è°ƒ)
2.ç‚¹å‡»åŒºåŸŸæ˜¯å¦åœ¨åœ†å†…åˆ¤æ–­
3.ä¸¤ä¸ªCAShapeLayeråœ†ç¯+(ä¸€ä¸ªCAShapeLayerç®­å¤´å’ŒCAShapeLayerç«–çº¿)ç»„åˆæˆç®­å¤´+label
4.ä¸€ä¸ªserviceç±»ç®¡ç†åˆ›å»ºæ‰€ç”¨åˆ°çš„pathå’Œanimation


## service ç±»
### serviceå±æ€§
	@property (nonatomic , assign) CGRect viewRect;
	
	@property (nonatomic, strong) UIBezierPath *progressPath;
	/**    å…³é”®å¸§    **/
	@property (nonatomic, strong) UIBezierPath *arrowStartPath;
	@property (nonatomic, strong) UIBezierPath *arrowDownPath;
	@property (nonatomic, strong) UIBezierPath *arrowMidtPath;
	@property (nonatomic, strong) UIBezierPath *arrowEndPath;
	
	@property (nonatomic, strong) UIBezierPath *arrowWavePath;
	
	@property (nonatomic, strong) UIBezierPath *verticalLineStartPath;
	@property (nonatomic, strong) UIBezierPath *verticalLineEndPath;
	
	@property (nonatomic, strong) UIBezierPath *succesPath;
### serviceæ–¹æ³•
	/**
	 *  çº¿åˆ°ç‚¹åŠ¨ç”»
	 *
	 *  @param values å…³é”®å¸§
	 *
	 *  @return åŠ¨ç”»ç»„
	 */
	- (CAAnimationGroup *)getLineToPointUpAnimationWithValues:(NSArray *)values;
	/**
	 *  ç®­å¤´åˆ°çº¿çš„åŠ¨ç”»
	 *
	 *  @param values å…³é”®å¸§
	 *
	 *  @return åŠ¨ç”»ç»„
	 */
	- (CAAnimationGroup *)getArrowToLineAnimationWithValues:(NSArray *)values;
	/**
	 *  è·å–åœ†åœˆè¿›åº¦
	 *
	 *  @param progress å½“å‰è¿›åº¦å€¼
	 *
	 *  @return path
	 */
	- (UIBezierPath *)getCirclePathWithProgress:(CGFloat)progress;
	/**
	 *  ç»˜åˆ¶æ³¢æµªçº¿
	 *
	 *  @param offset  åç§»é‡
	 *  @param height    æµªé«˜
	 *  @param curvature æµªæ›²
	 *
	 *  @return path
	 */
	- (UIBezierPath *)getWavePathWithOffset:(CGFloat)offset
	                             WaveHeight:(CGFloat)height
	                          WaveCurvature:(CGFloat)curvature;
	/**
	 *  æ˜¯å¦æ˜¾ç¤ºè¿›åº¦label
	 *
	 *  @param isShow YES/NO
	 *
	 *  @return å¼¹æ€§åŠ¨ç”»
	 */
	- (CASpringAnimation *)getProgressAnimationShow:(BOOL)isShow;
	/**
	 *  çº¿å˜æˆåŠŸåŠ¨ç”»
	 *
	 *  @param values å…³é”®å¸§
	 *
	 *  @return åŠ¨ç”»ç»„
	 */
	- (CAAnimationGroup *)getLineToSuccessAnimationWithValues:(NSArray *)values;
	/**
	 *  è·å–è¿›åº¦label Rect
	 *
	 *  @return Rect
	 */
	- (CGRect)getProgressRect;
### service key
	/*  animation key  */
	
	static NSString  * kLineToPointUpAnimationKey = @"kLineToPointUpAnimationKey";
	
	static NSString  * kArrowToLineAnimationKey = @"kArrowToLineAnimationKey";
	
	static NSString  * kProgressAnimationKey = @"kProgressAnimationKey";
	
	static NSString  * kSuccessAnimationKey = @"kSuccessAnimationKey";
### service æ¯”ä¾‹ç³»æ•°
	//ç®­å¤´æ¯”ä¾‹
	static const double arrowHScale = 130.00/250.00;
	//ç®­å¤´å¤´éƒ¨é«˜æ¯”ä¾‹
	static const double arrowTWScale = 96.00/250.00;
	static const double arrowTHScale = 50.00/250.00;
	//
	static const double lineWScale = 176.00/250.00;
	static const double pointSpacingScale = 16.00/250.00;
	
	static const double successPoint1ScaleX = 90.00/250.00;
	static const double successPoint1ScaleY = 126.00/250.00;
	
	static const double successPoint2ScaleX = 120.00/250.00;
	static const double successPoint2ScaleY = 160.00/250.00;
	
	static const double successPoint3ScaleX = 177.00/250.00;
	static const double successPoint3ScaleY = 95.00/250.00;

	static const  NSInteger  kSpacing = 2;
	
## download ç±»
### å±æ€§
	/**
	 *  è¿›åº¦:0~1
	 */
	@property (nonatomic, assign) CGFloat progress;
	/**
	 *  è¿›åº¦å®½
	 */
	@property (nonatomic, assign) CGFloat progressWidth;
	/**
	 *  åœæ­¢åŠ¨ç”»
	 */
	- (void)stopAllAnimations;
	/**
	 *  block å½¢å¼ç‚¹å‡»å›è°ƒ
	 */
	//@property (nonatomic, strong) void (^ didClickBlock)();
### æ‰€æœ‰æ–¹æ³•é¢„è§ˆ
![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/download_all.png)

æ–¹æ³•æ¯”è¾ƒå¤š,åœ¨è¿™ä¸ä¸€ä¸€å±•ç¤ºäº†,æœ‰æ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥ç›´æ¥å»[githubä¸‹è½½](https://github.com/Josin22/JSDownloadView),è®°å¾—ç‚¹ä¸ªæ˜Ÿæ˜Ÿå“¦~~~ğŸ˜œ

## è°ƒç”¨
æ·»åŠ äº‹ä»¶

	[downloadView addTarget:self action:@selector(updateProgress) forControlEvents:UIControlEventTouchUpInside];
æˆ–è€…blockå›è°ƒ

	//        downloadView.didClickBlock = ^{
	//            
	//            _timer = [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(timeDown) userInfo:nil repeats:YES];
	//        };
	
è¿™é‡Œæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚æ•°æ®

	// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚æ•°æ®è¿›åº¦
	- (void)timeDown{
	    _timeCount -= 1;
	    _progress += 0.005;
	    self.downloadView.progress  = _progress;
	    
	    if (_timeCount <= 0) {
	        
	        [self initData];
	        [_timer invalidate];
	        _timer = nil;
	    }
	}


# æœ€ç»ˆæ•ˆæœ

ç°å®ä¸ç†æƒ³è¿˜æ˜¯æœ‰äº›å·®è·,å¸Œæœ›ä¸æ˜¯å¾ˆå¤§,åœ¨æ­¤åˆ†äº«ä¸€ä¸‹è‡ªå·±ç ”ç©¶çš„ç»éªŒ,æœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥Issuesæˆ‘,

![images](https://raw.githubusercontent.com/Josin22/JSDownloadView/master/JSDownloadViewDemo/Source/download_animation.gif)



# 